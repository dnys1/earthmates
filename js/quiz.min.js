function loadAllQuestions(){$.ajax({type:"GET",url:"ajax/get_quiz_questions.php",cache:!1,success:function(e){for(var s=JSON.parse(e),t=0;t<s.length;t++){var o=parseInt(s[t].ID);(0==quizResume.length||-1!=quizResume.indexOf(o))&&(questionObject={},selfAssessment?questionObject.question=s[t].QuestionSelf:questionObject.question=s[t].QuestionOther,questionObject.ID=o,questionObject.weight=parseInt(s[t].WeightValue),questionObject.competencyID=parseInt(s[t].CompetencyID),questionsArray.push(questionObject))}questionsArray.length<s.length&&console.log("resuming quiz..."),shuffleArray(),$("#numQuestions").html(questionsArray.length),$("#numQuestions").removeClass("fa"),$("#numQuestions").removeClass("fa-spinner"),$("#numQuestions").removeClass("fa-spin")}})}function shuffleArray(){for(var e,s,t=questionsArray.length;0!==t;)s=Math.floor(Math.random()*t),t-=1,e=questionsArray[t],questionsArray[t]=questionsArray[s],questionsArray[s]=e}function loadQuestion(){$("#question").html(questionsArray[q].question),0==q?($("#submitQuiz").hide(),$("#saveProgress").show(),$("#nextQuestion").show(),$("#prevQuestion").hide()):q==questionsArray.length-1?($("#submitQuiz").show(),$("#saveProgress").hide(),$("#nextQuestion").hide(),$("#prevQuestion").show()):($("#submitQuiz").hide(),$("#saveProgress").show(),$("#prevQuestion").show(),$("#nextQuestion").show());var e=questionsArray[q].answer;if(e){var s="#answerRadio"+e;$(s).prop("checked",!0)}}function updateProgressBar(){var e=Math.floor(q/(questionsArray.length-1)*100);$(".progress-bar").attr("aria-valuenow",e),$(".progress-bar").html(e+"%"),$(".progress-bar").css("width",e+"%")}function recordCheckedValue(){var e=$("form input[type=radio]:checked").val();-1==questionsArray[q].weight&&(e=5-e),questionsArray[q].answer=e,console.log("q: "+q+" val: "+e)}var questionsArray=[],completedIDs=[],q=0;$(document).ready(function(){$("#quizContainer").hide(),loadAllQuestions(),selfAssessment?$(".meOrThem").html("me"):$(".meOrThem").html("them"),$("#startButton").click(function(){$("#welcomeScreen").hide(),$("#quizContainer").show(),$("#submitQuiz").hide(),$("#nextQuestion").show(),$("#prevQuestion").show(),loadQuestion()}),$("#prevQuestion").click(function(){q>0&&($("form input[type=radio]:checked").val()&&recordCheckedValue(),$("input[name=answerRadio]").prop("checked",!1),q--,loadQuestion(),updateProgressBar())}),$("#nextQuestion").click(function(){q<questionsArray.length&&($("form input[type=radio]:checked").val()?(recordCheckedValue(),$("input[name=answerRadio]").prop("checked",!1),q++,loadQuestion(),updateProgressBar()):alert("Nothing is checked"))}),$("#submitQuiz").click(function(){$("form input[type=radio]:checked").val()?(recordCheckedValue(),$("input[name='answers']").val(JSON.stringify(questionsArray)),$("form#quizForm").submit()):alert("Nothing is checked")}),$("#saveProgress").click(function(){$("form input[type=radio]:checked").val()&&recordCheckedValue(),$("input[name='answers']").val(JSON.stringify(questionsArray)),$("form#quizForm").submit()})});